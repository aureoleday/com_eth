#include <rtthread.h>
#include <string.h>
#include "lcd.h"
#include "hanzi.h"

typedef struct _GB16  
{
  char Index[2];  
  char Msk[32];            
}GB16_Typedef;


const GB16_Typedef GB16x16[] = 
{
  {"易",0x0F,0xF0,0x08,0x10,0x08,0x10,0x0F,0xF0,0x08,0x10,0x08,0x10,0x0F,0xF0,0x04,0x00,
        0x08,0x00,0x1F,0xFC,0x22,0x44,0x42,0x44,0x04,0x84,0x08,0x84,0x11,0x28,0x02,0x10},/*"易",0*/
  
  {"科",0x08,0x10,0x1D,0x10,0xF0,0x90,0x10,0x90,0x10,0x10,0xFD,0x10,0x10,0x90,0x38,0x90,
        0x34,0x10,0x50,0x1E,0x53,0xF0,0x90,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10},/*"科",1*/
  
  {"捷",0x20,0x40,0x20,0x40,0x27,0xFE,0x20,0x40,0xFB,0xF8,0x20,0x48,0x27,0xFE,0x28,0x48,
        0x33,0xF8,0xE0,0x40,0x22,0x40,0x22,0x7C,0x22,0x40,0x25,0x40,0xA4,0xFE,0x48,0x00},/*"捷",2*/
  
  {"生",0x01,0x00,0x11,0x00,0x11,0x00,0x11,0x00,0x3F,0xFC,0x21,0x00,0x41,0x00,0x81,0x00,
        0x01,0x00,0x3F,0xF8,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x00,0x00},/*"生",3*/
  
  {"态",0x01,0x00,0x01,0x00,0x7F,0xFC,0x01,0x00,0x02,0x80,0x04,0x40,0x0A,0x20,0x31,0x18,
        0xC0,0x06,0x01,0x00,0x08,0x88,0x48,0x84,0x48,0x12,0x48,0x12,0x87,0xF0,0x00,0x00},/*"态",4*/
  
  {"科",0x08,0x10,0x1D,0x10,0xF0,0x90,0x10,0x90,0x10,0x10,0xFD,0x10,0x10,0x90,0x38,0x90,
        0x34,0x10,0x50,0x1E,0x53,0xF0,0x90,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10},/*"科",5*/
  
  {"技",0x10,0x20,0x10,0x20,0x10,0x20,0x13,0xFE,0xFC,0x20,0x10,0x20,0x10,0x20,0x15,0xFC,
        0x18,0x84,0x30,0x88,0xD0,0x48,0x10,0x50,0x10,0x20,0x10,0x50,0x51,0x88,0x26,0x06},/*"技",6*/
  
  {"有",0x02,0x00,0x02,0x00,0xFF,0xFE,0x04,0x00,0x04,0x00,0x0F,0xF0,0x08,0x10,0x18,0x10,
        0x2F,0xF0,0x48,0x10,0x88,0x10,0x0F,0xF0,0x08,0x10,0x08,0x10,0x08,0x50,0x08,0x20},/*"有",7*/
  
  {"限",0x00,0x00,0x7B,0xF8,0x4A,0x08,0x52,0x08,0x53,0xF8,0x62,0x08,0x52,0x08,0x4B,0xF8,
        0x4A,0x44,0x4A,0x48,0x6A,0x30,0x52,0x20,0x42,0x10,0x42,0x88,0x43,0x06,0x42,0x00},/*"限",8*/
  
  {"公",0x00,0x80,0x04,0x80,0x04,0x80,0x08,0x40,0x08,0x40,0x10,0x20,0x20,0x10,0x42,0x08,
        0x82,0x06,0x04,0x00,0x04,0x40,0x08,0x20,0x10,0x20,0x3F,0xF0,0x10,0x10,0x00,0x00},/*"公",9*/
  
  {"司",0x00,0x00,0x3F,0xF8,0x00,0x08,0x00,0x08,0x7F,0xE8,0x00,0x08,0x00,0x08,0x1F,0x88,
        0x10,0x88,0x10,0x88,0x10,0x88,0x10,0x88,0x1F,0x88,0x10,0x88,0x00,0x28,0x00,0x10},/*"司",10*/
  
  
  {"大",0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x01,0x00,0x01,0x00,
        0x02,0x80,0x02,0x80,0x04,0x40,0x04,0x40,0x08,0x20,0x10,0x10,0x20,0x08,0xC0,0x06},/*"大",0*/
  
  {"气",0x10,0x00,0x10,0x00,0x3F,0xFC,0x20,0x00,0x4F,0xF0,0x80,0x00,0x3F,0xF0,0x00,0x10,
        0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x0A,0x00,0x0A,0x00,0x06,0x00,0x02},/*"气",1*/
  
  {"压",0x00,0x00,0x3F,0xFE,0x20,0x00,0x20,0x80,0x20,0x80,0x20,0x80,0x20,0x80,0x2F,0xFC,
        0x20,0x80,0x20,0x80,0x20,0x90,0x20,0x88,0x20,0x88,0x40,0x80,0x5F,0xFE,0x80,0x00},/*"压",2*/
  
  {"碱",0x00,0x14,0x00,0x12,0xF0,0x10,0x27,0xFE,0x24,0x10,0x44,0x10,0x75,0xD0,0xD4,0x12,
        0x54,0x12,0x55,0xD4,0x55,0x54,0x55,0x48,0x75,0xDA,0x54,0x2A,0x08,0x46,0x10,0x82},/*"碱",3*/
  
  {"洁",0x00,0x40,0x40,0x40,0x20,0x40,0x2F,0xFE,0x00,0x40,0x80,0x40,0x47,0xFC,0x50,0x00,
        0x10,0x00,0x23,0xF8,0xE2,0x08,0x22,0x08,0x22,0x08,0x22,0x08,0x23,0xF8,0x02,0x08},/*"洁",0*/ 

  {"量",0x00,0x00,0x1F,0xF0,0x10,0x10,0x1F,0xF0,0x10,0x10,0xFF,0xFE,0x00,0x00,0x1F,0xF0,
        0x11,0x10,0x1F,0xF0,0x11,0x10,0x1F,0xF0,0x01,0x00,0x1F,0xF0,0x01,0x00,0x7F,0xFC},/*"量",0*/

  {"浓",0x00,0x40,0x20,0x40,0x10,0x40,0x17,0xFC,0x84,0x84,0x48,0x88,0x41,0x40,0x11,0x44,
        0x13,0x48,0x25,0x30,0xE9,0x20,0x21,0x10,0x21,0x08,0x21,0x44,0x21,0x82,0x01,0x00},/*"浓",0*/
        
  {"氨",0x20,0x00,0x3F,0xFC,0x40,0x00,0x9F,0xF0,0x00,0x00,0x7F,0xF0,0x04,0x10,0x7F,0xD0,
        0x40,0x50,0x08,0x10,0xFF,0xD0,0x11,0x12,0x32,0x0A,0x0C,0x0A,0x1B,0x06,0x60,0x82},/*"氨",4*/  
  
  {"铵",0x20,0x40,0x20,0x20,0x38,0x20,0x23,0xFE,0x42,0x02,0x7C,0x44,0xA0,0x40,0x23,0xFE,
        0xF8,0x88,0x20,0x88,0x21,0x08,0x20,0xD0,0x28,0x20,0x30,0x50,0x20,0x88,0x03,0x04},/*"铵",0*/
  
  {"比",0x00,0x80,0x20,0x80,0x20,0x80,0x20,0x84,0x20,0x88,0x20,0x90,0x3E,0xA0,0x20,0xC0,
        0x20,0x80,0x20,0x80,0x20,0x80,0x20,0x82,0x26,0x82,0x38,0x82,0x20,0x7E,0x00,0x00},/*"比",1*/
  
  {"氮",0x20,0x00,0x3F,0xFC,0x40,0x00,0x9F,0xF0,0x00,0x00,0x7F,0xF0,0x04,0x10,0x24,0x90,
        0x0B,0x10,0x10,0x90,0x60,0x50,0x04,0x12,0x24,0x8A,0x0B,0x0A,0x10,0x86,0x60,0x42},/*"氮",2*/
  
  {"导",0x00,0x00,0x3F,0xF0,0x20,0x10,0x20,0x10,0x3F,0xF0,0x20,0x04,0x20,0x04,0x1F,0xFC,
        0x00,0x20,0x00,0x20,0xFF,0xFE,0x08,0x20,0x04,0x20,0x04,0x20,0x00,0xA0,0x00,0x40},/*"导",3*/
  
  {"电",0x01,0x00,0x01,0x00,0x01,0x00,0x3F,0xF8,0x21,0x08,0x21,0x08,0x21,0x08,0x3F,0xF8,
        0x21,0x08,0x21,0x08,0x21,0x08,0x3F,0xF8,0x21,0x0A,0x01,0x02,0x01,0x02,0x00,0xFE},/*"电",4*/
  
  {"度",0x01,0x00,0x00,0x80,0x3F,0xFE,0x22,0x20,0x22,0x20,0x3F,0xFC,0x22,0x20,0x22,0x20,
        0x23,0xE0,0x20,0x00,0x2F,0xF0,0x24,0x10,0x42,0x20,0x41,0xC0,0x86,0x30,0x38,0x0E},/*"度",5*/
  
  {"氟",0x20,0x00,0x3F,0xFC,0x40,0x00,0x9F,0xF0,0x00,0x00,0x7F,0xF0,0x12,0x10,0x7F,0x90,
        0x12,0x90,0x7F,0x90,0x52,0x10,0x7F,0xD2,0x12,0x4A,0x13,0x4A,0x22,0x86,0x42,0x02},/*"氟",6*/
  
  {"钙",0x10,0x00,0x13,0xFE,0x3C,0x20,0x20,0x20,0x41,0x20,0xBD,0x3E,0x11,0x20,0x11,0x20,
        0xFD,0x20,0x11,0xFE,0x10,0x02,0x10,0x02,0x14,0x02,0x18,0x02,0x10,0x14,0x00,0x08},/*"钙",7*/
  
  {"固",0x00,0x00,0x7F,0xFC,0x41,0x04,0x41,0x04,0x5F,0xF4,0x41,0x04,0x41,0x04,0x4F,0xE4,
        0x48,0x24,0x48,0x24,0x48,0x24,0x4F,0xE4,0x48,0x24,0x40,0x04,0x7F,0xFC,0x40,0x04},/*"固",8*/
  
  {"光",0x01,0x00,0x21,0x08,0x11,0x08,0x09,0x10,0x09,0x20,0x01,0x00,0xFF,0xFE,0x04,0x40,
        0x04,0x40,0x04,0x40,0x04,0x40,0x08,0x42,0x08,0x42,0x10,0x42,0x20,0x3E,0xC0,0x00},/*"光",9*/
  
  {"还",0x00,0x00,0x23,0xFC,0x10,0x20,0x10,0x20,0x00,0x40,0x00,0x40,0xF0,0xD0,0x11,0x48,
        0x12,0x44,0x14,0x44,0x10,0x40,0x10,0x40,0x10,0x40,0x28,0x00,0x47,0xFE,0x00,0x00},/*"还",10*/
  
  {"海",0x01,0x00,0x21,0x00,0x11,0xFC,0x12,0x00,0x85,0xF8,0x41,0x08,0x49,0x48,0x09,0x28,
        0x17,0xFE,0x11,0x08,0xE2,0x48,0x22,0x28,0x23,0xFC,0x20,0x08,0x20,0x50,0x00,0x20},/*"海",11*/
  
  {"化",0x08,0x80,0x08,0x80,0x08,0x84,0x10,0x88,0x10,0x90,0x30,0xA0,0x30,0xC0,0x50,0x80,
        0x91,0x80,0x12,0x80,0x14,0x80,0x10,0x82,0x10,0x82,0x10,0x82,0x10,0x7E,0x10,0x00},/*"化",12*/
  
  {"解",0x10,0x00,0x10,0xFC,0x3C,0x24,0x24,0x24,0x48,0x54,0xBE,0x88,0x2A,0x10,0x2A,0x50,
        0x3E,0x7C,0x2A,0x90,0x2A,0x10,0x3E,0xFE,0x2A,0x10,0x4A,0x10,0x42,0x10,0x86,0x10},/*"解",13*/
  
  {"离",0x02,0x00,0x01,0x00,0xFF,0xFE,0x00,0x00,0x14,0x50,0x13,0x90,0x14,0x50,0x1F,0xF0,
        0x01,0x00,0x7F,0xFC,0x42,0x04,0x44,0x44,0x4F,0xE4,0x44,0x24,0x40,0x14,0x40,0x08},/*"离",14*/
  
  {"率",0x02,0x00,0x01,0x00,0x7F,0xFC,0x02,0x00,0x44,0x44,0x2F,0x88,0x11,0x10,0x22,0x48,
        0x4F,0xE4,0x00,0x20,0x01,0x00,0xFF,0xFE,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00},/*"率",15*/
  
  {"绿",0x10,0x00,0x11,0xF8,0x20,0x08,0x20,0x08,0x49,0xF8,0xF8,0x08,0x10,0x08,0x23,0xFE,
        0x40,0x20,0xFA,0x22,0x41,0x74,0x00,0xA8,0x19,0x24,0xE2,0x22,0x40,0xA0,0x00,0x40},/*"绿",16*/
  
  {"氯",0x20,0x00,0x3F,0xFC,0x40,0x00,0x9F,0xF0,0x00,0x00,0x7F,0xF0,0x00,0x10,0x7F,0x90,
        0x00,0x90,0x3F,0x90,0x00,0x90,0xFF,0xF2,0x24,0x8A,0x15,0x0A,0x24,0x86,0x4C,0x42},/*"氯",17*/

  {"溶",0x00,0x40,0x20,0x20,0x13,0xFE,0x12,0x02,0x84,0x94,0x41,0x08,0x4A,0x64,0x08,0x90,
        0x11,0x08,0x12,0x04,0xE5,0xFA,0x21,0x08,0x21,0x08,0x21,0x08,0x21,0xF8,0x01,0x08},/*"溶",18*/

  {"深",0x00,0x00,0x27,0xFC,0x14,0x04,0x14,0xA4,0x81,0x10,0x42,0x08,0x40,0x40,0x10,0x40,
        0x17,0xFC,0x20,0x40,0xE0,0xE0,0x21,0x50,0x22,0x48,0x2C,0x46,0x20,0x40,0x00,0x40},/*"深",19*/
  
	{"水",0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x08,
        0x01,0x08,0x7D,0x90,0x05,0xA0,0x09,0x40,
        0x09,0x40,0x11,0x20,0x11,0x10,0x21,0x08,
        0x41,0x06,0x81,0x00,0x05,0x00,0x02,0x00},
		
	{"素",0x01,0x00,0x3F,0xF8,0x01,0x00,0x1F,0xF0,
        0x01,0x00,0xFF,0xFE,0x02,0x00,0x04,0x20,
        0x1F,0xC0,0x01,0x80,0x06,0x10,0x3F,0xF8,
        0x01,0x08,0x11,0x20,0x25,0x10,0x42,0x08},
		
	{"酸",0x00,0x10,0xFE,0x10,0x28,0x20,0x28,0x44,
        0xFE,0xFE,0xAA,0x28,0xAA,0x44,0xAA,0xA2,
        0xAE,0x3C,0xC2,0x44,0x82,0x44,0xFE,0xA8,
        0x82,0x10,0x82,0x28,0xFE,0x44,0x82,0x82},
		
	{"体",0x08,0x40,0x08,0x40,0x08,0x40,0x10,0x40,0x17,0xFC,0x30,0x40,0x30,0xE0,0x50,0xE0,
		0x91,0x50,0x11,0x50,0x12,0x48,0x15,0xF4,0x18,0x42,0x10,0x40,0x10,0x40,0x10,0x40},/*"体",23*/
		
	{"位",0x08,0x80,0x08,0x40,0x08,0x40,0x10,0x00,0x17,0xFC,0x30,0x00,0x30,0x08,0x52,0x08,
		0x92,0x08,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x20,0x10,0x20,0x1F,0xFE,0x10,0x00},/*"位",24*/
		
	{"温",0x00,0x00,0x23,0xF8,0x12,0x08,0x12,0x08,0x83,0xF8,0x42,0x08,0x42,0x08,0x13,0xF8,
		0x10,0x00,0x27,0xFC,0xE4,0xA4,0x24,0xA4,0x24,0xA4,0x24,0xA4,0x2F,0xFE,0x00,0x00},/*"温",25*/
		
	{"硝",0x00,0x20,0x01,0x24,0xFC,0xA4,0x10,0xA8,0x10,0x20,0x21,0xFC,0x3D,0x04,0x65,0x04,
		0x65,0xFC,0xA5,0x04,0x25,0x04,0x25,0xFC,0x3D,0x04,0x25,0x04,0x21,0x14,0x01,0x08},/*"硝",26*/
		
	{"学",0x22,0x08,0x11,0x08,0x11,0x10,0x00,0x20,0x7F,0xFE,0x40,0x02,0x80,0x04,0x1F,0xE0,
		0x00,0x40,0x01,0x80,0xFF,0xFE,0x01,0x00,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00},/*"学",27*/
		
	{"盐",0x08,0x20,0x08,0x20,0x7F,0x20,0x08,0x28,0x08,0x24,0x0F,0x22,0xF0,0x20,0x40,0x20,
		0x00,0x00,0x3F,0xF8,0x24,0x48,0x24,0x48,0x24,0x48,0x24,0x48,0xFF,0xFE,0x00,0x00},/*"盐",28*/
		
	{"氧",0x20,0x00,0x3F,0xFC,0x40,0x00,0x9F,0xF0,0x00,0x00,0x7F,0xF0,0x11,0x10,0x0A,0x10,
		0x7F,0xD0,0x04,0x10,0x3F,0x90,0x04,0x12,0xFF,0xEA,0x04,0x0A,0x04,0x06,0x04,0x02},/*"氧",29*/
		
	{"叶",0x00,0x20,0x00,0x20,0x78,0x20,0x48,0x20,0x48,0x20,0x48,0x20,0x4B,0xFE,0x48,0x20,
		0x48,0x20,0x48,0x20,0x78,0x20,0x48,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20},/*"叶",30*/
		
	{"原",0x00,0x00,0x3F,0xFE,0x20,0x80,0x21,0x00,0x27,0xF0,0x24,0x10,0x24,0x10,0x27,0xF0,
		0x24,0x10,0x24,0x10,0x27,0xF0,0x20,0x80,0x24,0x90,0x48,0x88,0x52,0x84,0x81,0x00},/*"原",31*/
		
	{"值",0x08,0x40,0x08,0x40,0x0F,0xFC,0x10,0x40,0x10,0x40,0x33,0xF8,0x32,0x08,0x53,0xF8,
		0x92,0x08,0x13,0xF8,0x12,0x08,0x13,0xF8,0x12,0x08,0x12,0x08,0x1F,0xFE,0x10,0x00},/*"值",32*/
		
	{"重",0x00,0x10,0x00,0xF8,0x3F,0x00,0x01,0x00,0xFF,0xFE,0x01,0x00,0x1F,0xF0,0x11,0x10,
		0x1F,0xF0,0x11,0x10,0x1F,0xF0,0x01,0x00,0x3F,0xF8,0x01,0x00,0xFF,0xFE,0x00,0x00},/*"重",33*/
		
	{"浊",0x00,0x40,0x20,0x40,0x10,0x40,0x17,0xFC,0x84,0x44,0x44,0x44,0x44,0x44,0x14,0x44,
		0x17,0xFC,0x24,0x44,0xE0,0x40,0x20,0x48,0x20,0x44,0x2F,0xFE,0x24,0x02,0x00,0x00},/*"浊",34*/
		
	{"子",0x00,0x00,0x7F,0xF8,0x00,0x10,0x00,0x20,0x00,0x40,0x01,0x80,0x01,0x00,0xFF,0xFE,
		0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00},/*"子",35*/
		
	{"总",0x10,0x10,0x08,0x20,0x04,0x40,0x00,0x00,0x1F,0xF0,0x10,0x10,0x10,0x10,0x10,0x10,
		0x1F,0xF0,0x10,0x10,0x01,0x00,0x08,0x84,0x48,0x92,0x48,0x12,0x87,0xF0,0x00,0x00},/*"总",36*/
		
	{"阻",0x00,0x00,0x7D,0xF8,0x45,0x08,0x49,0x08,0x49,0x08,0x51,0xF8,0x49,0x08,0x49,0x08,
		0x45,0x08,0x45,0xF8,0x45,0x08,0x69,0x08,0x51,0x08,0x41,0x08,0x47,0xFE,0x40,0x00},/*"阻",37*/
};


static void LCD_ShowChinese(u16 x,u16 y,u8 fontSize,u16 pointColor,u16 backColor,u8 *pChineseData)
{
    u32 i;  
    u8 j =0;
    u8 k =0;     
    u8 d =0;     
    for(i=0;i<(fontSize*fontSize);i++)
    {
        if((*pChineseData)&(1<<(7-j)))
        {
            LCD_Color_DrawPoint(x+j+k*8, y+d, pointColor);
        }
        else
        {
            LCD_Color_DrawPoint(x+j+k*8, y+d, backColor);
        }
        j = j +1;
        if(j ==8)
        {
            j =0;
            pChineseData++;
            k++;       
            if(k>=(fontSize/8))
            {
                k=0;
                d++;
            }
        }
    }
}

void LCD_DisplayCString(uint16_t x, uint16_t y, char *pstr)
{  
    uint8_t wordNum;
    uint16_t word_index;
    const GB16_Typedef* p_tab;
    
    p_tab = GB16x16; 
    wordNum = sizeof(GB16x16) / sizeof(GB16_Typedef);

    while(*pstr != '\0')
    {
        for(word_index=0; word_index<wordNum; word_index++)
        {
            if(*pstr==p_tab[word_index].Index[0] && *(pstr+1)==p_tab[word_index].Index[1])
            {
                LCD_ShowChinese(x,y,16,color_brush,color_bkg,(u8*)&(p_tab[word_index].Msk));
                pstr+=2;
                x += 16;
                if(x > 225)   
                {
                    x = 0;
                    y += 16; 
                }
            }
        }
    }
}

void LCD_DisplayCString_color(uint16_t x, uint16_t y, char *pstr, uint16_t brush_color, uint16_t back_color)
{  
    uint8_t wordNum;
    uint16_t word_index;
    const GB16_Typedef* p_tab;
    
    p_tab = GB16x16; 
    wordNum = sizeof(GB16x16) / sizeof(GB16_Typedef);

    while(*pstr != '\0')
    {
        for(word_index=0; word_index<wordNum; word_index++)
        {
            if(*pstr==p_tab[word_index].Index[0] && *(pstr+1)==p_tab[word_index].Index[1])
            {
                LCD_ShowChinese(x,y,16,brush_color,back_color,(u8*)&(p_tab[word_index].Msk));
                pstr+=2;
                x += 16;
                if(x > 225)   
                {
                    x = 0;
                    y += 16; 
                }
            }
        }
    }
}



